<mat-sidenav-container fullscreen>
  <mat-sidenav #start (click)="start.close()" (openedChange)="onSidenavToggle($event)">
    <mat-nav-list>

      <mat-expansion-panel
        class="app-expansion-panel"
        (click)="toggleSidebar($event)"
      >
        <mat-expansion-panel-header>
          <mat-panel-title> Utilisateur </mat-panel-title>
        </mat-expansion-panel-header>
        <a
          mat-list-item
          [routerLink]="['/users', 'account']"
          matTooltip="Gestion du compte utilisateur"
          (click)="closeSidenav()"
        >
          <mat-icon>account_circle</mat-icon>
          <span>Utilisateur: {{ authService.user()?.username }}</span>
        </a>
        <a
          mat-list-item
          [routerLink]="['/users']"
          matTooltip="Liste des utilisateurs"
          (click)="closeSidenav()"
        >
          <mat-icon>library_books</mat-icon>
          <span>Utilisateurs</span>
        </a>
      </mat-expansion-panel>
      <mat-expansion-panel
        class="app-expansion-panel"
        (click)="toggleSidebar($event)"
      >
        <mat-expansion-panel-header>
          <mat-panel-title> Formulaires </mat-panel-title>
        </mat-expansion-panel-header>
        <a
          mat-list-item
          [routerLink]="['/forms']"
          matTooltip="Liste des formulaires"
          (click)="closeSidenav()"
        >
          <mat-icon>library_books</mat-icon>
          <span>Formulaires</span>
        </a>
        <a
          mat-list-item
          [routerLink]="['/forms/add']"
          matTooltip="Ajouter un formulaire"
          (click)="closeSidenav()"
        >
          <mat-icon>add_circle</mat-icon>
          <span>Ajouter un formulaire</span>
        </a>
      </mat-expansion-panel>
    </mat-nav-list>
  </mat-sidenav>
  <mat-toolbar color="primary">
    <div class="toolbar-tools">
      @if(isLoggedIn()) {
      <button mat-icon-button (click)="start.open('mouse')">
        <mat-icon matTooltip="Menu utilisateur">menu</mat-icon>
      </button>
      }
      <div class="spacer"></div>
      @if(isLoggedIn()) {
      <button mat-icon-button (click)="onLogout()" class="right-button">
        <mat-icon matTooltip="DÃ©connexion">logout</mat-icon>
      </button>
      }@else{
      <button mat-icon-button [routerLink]="['login']" class="right-button">
        <mat-icon matTooltip="Connexion">login</mat-icon>
      </button>
      }
    </div>
  </mat-toolbar>
  <div class="app-main-container">
    <app-loading />
    <app-messages />
    <router-outlet />
  </div>
</mat-sidenav-container>
